<!-- この文書はプロダクト要件の前提と範囲を共有するためのコメントです。 -->
# Idle Dungeon (仮) 要件定義

## 目的
- Neovimの右下で静かに進行する放置型ロールプレイングゲームを提供する。
- 作業の集中を邪魔せず、気づいたときに少し育っている体験を作る。

## 参考にした要点
- 一本道のフィールドを左右に進み、右へ進むほど強い敵と遭遇する構造を参考にする。
- 死亡時はスタート地点へ戻るが、資金の減少など強いペナルティは与えない方針を参考にする。
- レベルアップ時にステータスの割り振りがあり、自動振り分けが可能な設計思想を参考にする。
- 装備と仲間の相乗効果のように、組み合わせで効果が変わる仕組みを導入する。

## 体験の柱
- 右下で地味に進むのに、ほどよく成長や発見がある。
- 入力や作業の積み重ねが、装備や称号の解放につながる。
- 自動進行で手間は少ないが、メニューで方針を選べる。

## 詳細ドキュメント
- `docs/requirements_detail.md` に機能要件と非機能要件の詳細を整理する。
- `docs/content.md` にキャラクター、装備、イベントの具体的な設計を整理する。
- `docs/design.md` に構成と実装指針を整理する。

## 対象ユーザー
- Neovimで長時間作業する人。
- 放置型ロールプレイングゲームが好きな人。
- 作業の進捗と遊びを結びつけたい人。

## 主要要件
### ゲーム進行
- 起動直後から主人公は自動で右方向へ進む。
- 自動開始は既定で有効にし、メニューで無効化できる。
- 戦闘は自動で進行し、数値は簡潔で読みやすく表示する。
- 会話やイベントは必ず時間経過で自動的に進む。
- 選択肢は置かず、一直線のシナリオとする。
- 敗北時はステージの開始地点へ戻り、レベルと装備は保持する。
<!-- この項目はステージ進行を明確にするためのコメントです。 -->
- ステージの終端に到達すると自動で次のステージへ進む。

### 自動進行の体験
- 会話の自動進行は既定で12秒とし、残り時間を示す表示を付ける。
- 自動進行の間隔は設定で変更できる。
<!-- この項目はペット表示の要件を明確にするためのコメントです。 -->
- 可視モードではドット調のペットが1行内で歩行し、動きが分かるようにする。

### メニューと操作
- クリックまたは `:IdleDungeonMenu` でメニューを開ける。
- 装備の変更、開始ダンジョンの設定、武器の購入と販売、キャラクターの変更ができる。
- メニューはキーボードのみで操作可能にする。
- メニューの既定言語は英語とし、メニューから日本語へ切り替えられる。
<!-- この項目はメニューの配置要件を明確にするためのコメントです。 -->
- メニューは画面中央に開くデザインとする。
<!-- この項目は初期化機能の要件を明確にするためのコメントです。 -->
- メニューから全データの初期化を実行できる。

### 成長と装備
- レベルアップ時にステータスを配分できる。
- 自動配分の設定を提供する。
- 装備は武器、防具、装身具、仲間の枠を持つ。
- 装備と仲間の組み合わせで追加効果が発生する。

### 入力実績による解放
- 入力文字数、行数、保存回数、連続作業時間などの実績で装備が解放される。
- ファイル種別ごとの入力量に応じた解放条件を持つ。
- 解放の進捗はメニューで確認できる。

### 保存と復帰
- 進行状況と解放状況はローカルに保存する。
- 自動保存の間隔を設定できる。
- 手動保存もメニューから行える。

## 非機能要件
- Neovimの操作に体感的な遅延を与えない。
- 画面更新は最小限に抑え、ちらつきを避ける。
- 画面サイズが変わっても右下に表示され続ける。
- 右下表示は1行を基本とし、最大2行までに制限する。
- ネットワーク通信は標準では行わない。
<!-- この項目は保存単位を明確にするためのコメントです。 -->
- データはユーザー単位で共有され、複数プロジェクト間で同一の進行を保持する。
<!-- この項目は情報表示の強化を明確にするためのコメントです。 -->
- 表示設定が2行のときはステージ進行度と現在の行動が把握できる。

## 制約と除外
- シナリオは選択肢なしの一本道に限定する。
- 音声や派手な演出は入れず、地味さを保つ。

## 受け入れ基準
- 自動で右へ進み、会話も時間で進行する。
- 敗北してもレベルと装備が保持され、ステージの開始地点へ戻る。
- メニューで装備変更、開始ダンジョン設定、購入と販売、キャラクター変更が可能。
- 入力実績による装備解放が確認できる。
- 保存と復帰が安定して行える。
